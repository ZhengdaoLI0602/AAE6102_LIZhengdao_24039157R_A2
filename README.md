# AAE6102_LIZhengdao_24039157R_A2
Task 1,4, and 5 are assisted or generated by Perplexity.AI, with the [chatting history](https://www.perplexity.ai/search/can-you-briefly-introduce-thes-wf35RLJ.RaWsGavhtwGmjA) is available to review.


## Task 1
### (I) Working Principle
GNSS techniques for smartphone navigation, including Differential GNSS (DGNSS), Real-Time Kinematic (RTK), Precise Point Positioning (PPP), and PPP-RTK, will be compared in several aspects as follows.

1. DGNSS: Uses pseudorange measurements from a local base station to compute satellite signal errors (e.g., ionospheric and tropospheric delays). Corrections are broadcast to rovers via radio/internet, improving pseudorange-based positioning [1, 2].
2. RTK: Relies on carrier-phase measurements from both base and rover. Double-differencing eliminates common errors (orbital, atmospheric) to resolve integer ambiguities, enabling centimeter-level accuracy [2, 3].
3. PPP: Processes undifferenced pseudorange and carrier-phase measurements using precise satellite orbit/clock corrections from global networks. Models atmospheric delays internally [2, 4].
4. PPP-RTK: Combines PPP’s global orbit/clock corrections with RTK-like regional atmospheric delay grids. Uses carrier-phase measurements and ambiguity resolution for faster convergence [4, 5].

### (II) Level of Accuracy
![image](https://github.com/user-attachments/assets/1d168a64-1a33-4e84-9824-1b8c06967c45)

### (III) Supported Coverage
1. DGNSS: Local (50 km from base station).
2. RTK: Regional (50 km from base/CORS network).
3. PPP: Global (relies on satellite-broadcast corrections).
4. PPP-RTK: Regional (requires dense CORS network for atmospheric grids).

### (IV) Robustness
1. DGNSS/RTK: Vulnerable to base-rover communication loss; multipath in urban canyons disrupts ambiguity resolution.
2. PPP: Resilient to local infrastructure failures but sensitive to correction data interruptions (e.g., internet loss).
3. PPP-RTK: Gracefully degrades to PPP accuracy if outside CORS coverage.

### (V) Infrastructure and Cost
1. DGNSS/RTK: Require local base stations (high setup/maintenance costs) and real-time communication links.
2. PPP: Minimal infrastructure (global correction services like IGS), but subscription fees may apply.
3. PPP-RTK: Regional CORS networks balance cost and coverage; scalable for mass-market use.

### (VI) Limitations
1. DGNSS: Accuracy limited by pseudorange noise and smartphone antenna quality; coverage restricted to base station proximity.
2. RTK: Performance degrades with baseline length; carrier-phase noise and multipath degrade performance in urban areas
3. PPP: Requires 20–40 minutes for decimeter-level accuracy.
4. PPP-RTK: Dependent on regional CORS density; smartphone antennas struggle with low carrier-phase SNR.

Finally, Table 2 briefly summarizes the properties of the four GNSS techniques for smartphone navigation [1, 2, 3, 4, 5].

![image](https://github.com/user-attachments/assets/b06d7106-88c0-46a0-aaef-84ff824b0786)


## Task 2
The given skymask dataset is the relationship between the azimuth angle (AZi (i ∈ (1, 2, . . . , 360))) and the corresponding lowest elevation angle (ELi (i ∈ (1, 2, . . . , 360))) that enables Line-of-Sight (LOS) visibility. In the Ordinary Least-squares (OLS) positioning, each received satellite signal can be first determined with a certain azimuth angle AZk (k ∈ (1, 2, . . . , 360)), then if elevation angle given by the received satellite is lower than ELk, we may assume it is not LOS observation and filter out this bad-quality measurement. At one epoch, after this skymask-filtering, if the available number of satellites is smaller than 4, we abort the positioning for this epoch. The above work procedures can be summarized in the flowchart in 1. As for the urban dataset with 839 epochs in total, the 2D positioning results of OLS with skymask and without skymask are summarized in Figure 2. It can be shown that the positioning precision is significantly improved because bad-quality measurements (i.e., not LOS signals) are filtered out. Table 3 also compares the standard deviation(STD) and root-mean-square error (RMSE) between the two methods. It can be shown that the positioning accuracy is not necessarily improved with skymask because the filtering process might result in less number of satellite signals for positioning. Notably, the skymask excludes the satellites based on the elevation angle, which is highly related their height information. Therefore, the geometry in the vertical dimension will be partly destroyed, thus generating worse 3D positioning performance. Besides, GNSS solutions exist in all the 839 epochs for both methods, which indicates 100% solution availability. However, theoretically, the skymask filtering scheme may not have sufficient number of LOS-signal satellites for least-squares estimation. Therefore, the OLS with skymask may not have solution for all the epochs. 
![image](https://github.com/user-attachments/assets/6fb9997c-ea01-4fbf-9a1a-a6e7df1ef439)
![image](https://github.com/user-attachments/assets/d52f3119-9a81-4383-9e96-a2c7b49ea3f9)

## Task 3
The following discussion will be conducted based on the ”OpenSky” dataset, with 926 epochs in total. Throughout all the epochs, there are 9 received satellite signals. The RAIM scheme first considers detection, after which the isolation is conducted. If one single faulty measurement is detected, this specific measurement will be isolated and positioning will be conducted again.

In ”A2.m”, set settings.sys.lstype = 1 to run WLS positioning. Line 154-189 in ”calcPosLSE.m” implements the weighted RAIM along WLS, supported with functions ”chi2_detector.m” and ”compute_PL.m”.

Consider the estimated weighted position $X$ based on
the WSSE test statistics is formulated as




















